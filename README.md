# perspective_grid_eqrect
正距円筒図法(Equirectangular)に則ったグリッド状の
“パースガイド”を計算して、画像生成します。

---
## 概要
全天球イラストを描く際に、
正距円筒図法に則ったパースガイド計算が必要になりますが、
このスクリプトは水平グリッド状のパースガイドを計算して、
PNG画像を生成・描画します。
PNG画像はパースガイド面以外は透過して生成しますので、
Photoshop等のペイントソフトにレイヤーとしてすぐに読み込めて
作画作業に入ることができます。  
いちおう「水平パースガイド生成」「垂直パースガイド生成(垂直面の傾斜角も指定可能)」
「円ガイド生成」「太陽光によってできる影(平行光源)計算」の4つの機能をスクリプトとして提供しますが、このうち
**「水平パースガイドの生成」と「垂直パースガイド生成」のみGUI対応しています。**

---
## 動作環境(使用モジュール)
* Python(Anaconda) 3.6.4(5.1.0)
* tkinter 8.6
* numpy 1.14.0
* pillow 5.0.0

---
## 簡単な使い方
※拙著[「全天球イラストの描き方」](https://www.pixiv.net/user/810920/series/41910)
をまずはご覧頂き、用語や概念を理解した上で以下の使い方をお読みください。

[水平パースガイド生成](doc/setting_horz_plane_pers_grid.md)  
[垂直パースガイド生成](doc/setting_vert_plane_pers_grid.md)  

---

## 今後やること(確定はしていない)
### いろんな画像サイズ対応
今のところ5376 X 2688のみ対応です。

### 機能を整理して実装し直し
概要にも書きましたが、現在まともにインターフェイスをもっているのは
「水平パースガイド生成」「垂直パースガイド生成」のみです。
* 円ガイド生成(circle_plane_pers_grid.py)
* 太陽光によってできる影(平行光源)計算(calc_directional_light.py)

上記は個別スクリプトとして実装してありますが、どれも設定値を入力するためのインターフェイスは無く、スクリプト内の数値(定数)を直接書き換えて実行するというスタイルです。  
このため、機能を整理して「pers_grid_exec.py」に統合することを企んでいます。

### 機能整理するときに、中途半端なクラス実装をもうちっとなんとかする…
いかんせん、イラスト制作の時に必要に迫られてだだーっと作ったモノたちばかりなので、
プログラムの抽象化がほとんどなされていません。
後から作った「円ガイド生成」あたりになると、「これオブジェクトでまとめた方がラクじゃね？」という事に気付きクラス実装を始めてみましたが、最初に作った「水平&垂直パースガイド生成」のほうは置いてけぼりのままで、なんとも中途半端なことになってます・・・

---

## 免責事項
このプログラムはそもそも展開用に書いたものではないので、ドキュメント等はありません(書く予定もありません)。従って、このREADMEおよび備忘録的に書いたソース内のコメントを頼りに、Pythonコードを解析できる人のみ利用してください。  
ライセンスはGPLに準拠します。利用の際は、作者は一切の責任(サポート等)を負わないものとします。  
もともと作者(わたなべ:mana544)が全天球イラスト制作用に個人的に描いた汎用性のないスクリプトなので、ソース(構造含む)が汚いのはご容赦を。合間見てちょぼちょぼ修正入れていきます。Fork大歓迎(誰か抽象化してクラスで書いてくれないかな…)

